server {
    listen 443 ssl;  # Listen on port 443 for secure SSL connections
    server_name my_domain.com;  # Replace with your domain name

    ssl_certificate /etc/ssl/certs/my_certificate.crt;  # Path to your SSL certificate
    ssl_certificate_key /etc/ssl/certs/my_certificate.key;  # Path to your private SSL certificate key

    location / {
        proxy_pass http://app:3000;  # Redirect traffic to your Next.js application running on port 3000
        proxy_set_header Host $host;  # Set the host header to the original host
        proxy_set_header X-Real-IP $remote_addr;  # Forward the real IP of the client
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;  # Forward the original IP address through proxy headers
        proxy_set_header X-Forwarded-Proto $scheme;  # Forward the original protocol (http or https)
    }
}